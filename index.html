<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Earn & Reward App</title>
   
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
   
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator/qrcode.js"></script>
    <style>
        /* Google Font Import */
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');
        /* CSS Variables for Theming */
        :root {
            --font-family: 'Nunito', sans-serif;
            --primary-color-light: #007aff;
            --primary-color-dark: #0a84ff;
            --success-color: #34c759;
            --warning-color: #ff9500;
            --danger-color: #ff3b30;
           
            /* Light Theme */
            --bg-blur-light: rgba(255, 255, 255, 0.5);
            --border-color-light: rgba(0, 0, 0, 0.1);
            --text-color-light: #1c1c1e;
            --subtle-text-light: #6d6d72;
            --shadow-light: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
           
            /* Dark Theme */
            --bg-blur-dark: rgba(28, 28, 30, 0.7);
            --border-color-dark: rgba(255, 255, 255, 0.15);
            --text-color-dark: #f2f2f7;
            --subtle-text-dark: #8e8e93;
            --shadow-dark: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }
        /* Base Styles */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: var(--font-family);
            transition: background-color 0.3s, color 0.3s;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow: hidden; /* Prevent scrolling issues */
        }
       
        /* Theme & Background Styles */
        body.light-theme { 
            background-color: #f2f2f7; 
            color: var(--text-color-light); 
            --primary-color: var(--primary-color-light);
        }
        body.dark-theme { 
            background-color: #000000; 
            color: var(--text-color-dark); 
            --primary-color: var(--primary-color-dark);
        }
       
        #app {
            max-width: 500px;
            margin: 0 auto;
            padding-bottom: 75px; /* Space for bottom nav */
            position: relative;
            height: 100vh;
            overflow-y: auto;
        }
        /* Dynamic Background */
        .background-orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.5;
            z-index: -1;
            animation: moveOrb 20s infinite alternate;
        }
        #orb1 { width: 400px; height: 400px; top: -150px; left: -150px; background: #007aff; }
        #orb2 { width: 300px; height: 300px; bottom: -100px; right: -100px; background: #ff3b30; }
        .dark-theme #orb1 { background: #0a84ff; }
        .dark-theme #orb2 { background: #ff453a; }
        @keyframes moveOrb {
            0% { transform: translate(0, 0); }
            100% { transform: translate(100px, 150px); }
        }
        /* General UI Elements */
        h2 { font-size: 1.8rem; font-weight: 800; margin-bottom: 20px; }
        p { line-height: 1.6; }
       
        /* Liquid Glass Card Style */
        .glass-card {
            border-radius: 20px;
            border: 1px solid;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }
        .light-theme .glass-card {
            background: var(--bg-blur-light);
            border-color: var(--border-color-light);
            box-shadow: var(--shadow-light);
        }
        .dark-theme .glass-card {
            background: var(--bg-blur-dark);
            border-color: var(--border-color-dark);
            box-shadow: var(--shadow-dark);
        }
       
        /* Page Styles */
        main { padding: 15px; }
        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        /* Header */
        .profile-header {
            padding: 20px 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        #user-photo {
            width: 60px; height: 60px; border-radius: 50%; object-fit: cover;
            border: 3px solid; animation: glow 2s infinite alternate;
        }
        .light-theme #user-photo { border-color: var(--primary-color-light); }
        .dark-theme #user-photo { border-color: var(--primary-color-dark); }
        @keyframes glow {
            from { box-shadow: 0 0 5px -2px var(--primary-color); }
            to { box-shadow: 0 0 10px 2px var(--primary-color); }
        }
        .user-details h1 { font-size: 1.3rem; font-weight: 700; display: flex; align-items: center; }
        .verified-icon { color: var(--success-color); font-size: 1.1rem; margin-left: 8px; }
        .user-details p { font-size: 1rem; font-weight: 600; }
        .light-theme .user-details p { color: var(--subtle-text-light); }
        .dark-theme .user-details p { color: var(--subtle-text-dark); }
       
        /* Balance Shimmer Animation */
        #user-points { animation: balance-shimmer 1.5s infinite; }
        @keyframes balance-shimmer {
            0% { opacity: 0.7; } 50% { opacity: 1; text-shadow: 0 0 5px var(--primary-color); } 100% { opacity: 0.7; }
        }
        /* Home Page */
        .time-date-card { text-align: center; }
        #date-display { font-size: 1.1rem; font-weight: 700; }
        #time-display { font-size: 2.5rem; font-weight: 800; letter-spacing: 2px; }
        .home-task-list .task-item {
            display: flex; align-items: center; justify-content: space-between;
            padding: 15px; margin-bottom: 10px; border-radius: 12px;
        }
        .light-theme .home-task-list .task-item { background: rgba(255, 255, 255, 0.7); }
        .dark-theme .home-task-list .task-item { background: rgba(0, 0, 0, 0.2); }
        .home-task-list .task-icon { font-size: 1.5rem; margin-right: 15px; }
        .light-theme .home-task-list .task-icon { color: var(--primary-color-light); }
        .dark-theme .home-task-list .task-icon { color: var(--primary-color-dark); }
        .home-task-list .task-info { flex-grow: 1; }
        .home-task-list h4 { font-size: 1rem; }
        .home-task-list p { font-size: 0.8rem; }
       
        /* Tasks Page */
        .progress-bar-container {
            width: 100%; height: 10px; border-radius: 5px; margin-bottom: 20px;
        }
        .light-theme .progress-bar-container { background-color: #e0e0e0; }
        .dark-theme .progress-bar-container { background-color: #38383a; }
        #task-progress-bar {
            width: 0%; height: 100%; border-radius: 5px; transition: width 0.5s;
        }
        .light-theme #task-progress-bar { background-color: var(--primary-color-light); }
        .dark-theme #task-progress-bar { background-color: var(--primary-color-dark); }
        .streak-container { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .streak-container i { font-size: 2rem; color: var(--warning-color); }
        #streak-days { font-weight: 700; font-size: 1.1rem; }
        .countdown-timer { text-align: center; }
        .countdown-timer p { margin-bottom: 5px; }
        #bonus-timer { font-size: 1.5rem; font-weight: 700; }
       
        /* Refer Page */
        .refer-header { text-align: center; }
        #gift-animation { width: 80px; margin-bottom: 10px; }
        .bonus-breakdown {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0;
            text-align: center;
        }
        .breakdown-card { padding: 15px; border-radius: 12px; }
        .light-theme .breakdown-card { background: rgba(255, 255, 255, 0.7); }
        .dark-theme .breakdown-card { background: rgba(0, 0, 0, 0.2); }
        .breakdown-card h4 { font-size: 1rem; }
        .breakdown-card p { font-size: 1.3rem; font-weight: 800; }
        .light-theme .breakdown-card p { color: var(--primary-color-light); }
        .dark-theme .breakdown-card p { color: var(--primary-color-dark); }
        #referral-link-input {
            width: 100%; padding: 12px; text-align: center; border: 1px dashed;
            border-radius: 8px; margin-bottom: 15px; font-size: 1rem;
        }
        .light-theme #referral-link-input { border-color: var(--primary-color-light); background-color: transparent; }
        .dark-theme #referral-link-input { border-color: var(--primary-color-dark); background-color: transparent; }
        .share-options { display: flex; justify-content: center; gap: 15px; margin-top: 15px; }
        .share-btn {
            background: none; border: 1px solid; border-radius: 50%;
            width: 50px; height: 50px; font-size: 1.5rem; cursor: pointer; transition: 0.2s;
        }
        .light-theme .share-btn { border-color: var(--border-color-light); color: var(--text-color-light); }
        .dark-theme .share-btn { border-color: var(--border-color-dark); color: var(--text-color-dark); }
        .light-theme .share-btn:hover { background-color: var(--primary-color-light); color: white; }
        .dark-theme .share-btn:hover { background-color: var(--primary-color-dark); color: white; }
       
        #fraud-message {
            font-size: 0.8rem; text-align: center; margin-top: 20px;
        }
        .light-theme #fraud-message { color: var(--subtle-text-light); }
        .dark-theme #fraud-message { color: var(--subtle-text-dark); }
       
        /* Withdraw Page */
        .animated-balance { text-align: center; margin-bottom: 20px; }
        .animated-balance h3 { font-size: 1.2rem; margin-bottom: 5px; }
        #animated-balance-value {
            font-size: 3rem; font-weight: 800;
            transition: transform 0.3s ease;
        }
        #animated-balance-value.bounce { transform: scale(1.1); }
        .light-theme #animated-balance-value { color: var(--primary-color-light); }
        .dark-theme #animated-balance-value { color: var(--primary-color-dark); }
       
        .withdraw-methods { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; }
        .method-btn {
            display: flex; flex-direction: column; align-items: center; gap: 8px;
            padding: 10px; border: 2px solid transparent; border-radius: 12px;
            cursor: pointer; transition: 0.2s; min-width: 80px;
        }
        .light-theme .method-btn { background: rgba(255, 255, 255, 0.7); }
        .dark-theme .method-btn { background: rgba(0, 0, 0, 0.2); }
        .method-btn img { width: 40px; height: 40px; }
        .method-btn.selected {
            border-color: var(--primary-color-light);
            transform: translateY(-5px);
        }
        .dark-theme .method-btn.selected { border-color: var(--primary-color-dark); }
       
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; }
        .form-group input {
            width: 100%; padding: 14px; border-radius: 10px; border: 1px solid;
            font-family: var(--font-family); font-size: 1rem;
        }
        .light-theme .form-group input { border-color: var(--border-color-light); background: transparent; }
        .dark-theme .form-group input { border-color: var(--border-color-dark); background: transparent; }
        .light-theme input:focus { outline: none; border-color: var(--primary-color-light); }
        .dark-theme input:focus { outline: none; border-color: var(--primary-color-dark); }
        .security-tips { font-size: 0.8rem; padding: 10px; border-radius: 8px; margin-top: 20px; }
        .light-theme .security-tips { background: rgba(255, 149, 0, 0.1); color: #c27600; }
        .dark-theme .security-tips { background: rgba(255, 159, 10, 0.15); color: #ff9f0a; }
        /* Profile Page */
        .profile-stats {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;
        }
        .stat-card { padding: 20px; text-align: center; }
        .stat-card h3 { font-size: 0.9rem; margin-bottom: 10px; }
        .light-theme .stat-card h3 { color: var(--subtle-text-light); }
        .dark-theme .stat-card h3 { color: var(--subtle-text-dark); }
        .stat-card p { font-size: 1.5rem; font-weight: 700; }
        .light-theme .stat-card p { color: var(--primary-color-light); }
        .dark-theme .stat-card p { color: var(--primary-color-dark); }
        /* Action Buttons */
        .action-btn {
            width: 100%; padding: 15px; font-size: 1rem; font-weight: 700; color: #fff;
            border: none; border-radius: 12px; cursor: pointer; transition: 0.2s;
            position: relative; display: flex; justify-content: center; align-items: center;
        }
        .light-theme .action-btn { background-color: var(--primary-color-light); }
        .dark-theme .action-btn { background-color: var(--primary-color-dark); }
        .action-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-loader { width: 20px; height: 20px; border: 3px solid rgba(255, 255, 255, 0.4); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite; display: none; }
        .action-btn.loading .btn-text { visibility: hidden; }
        .action-btn.loading .btn-loader { display: block; position: absolute; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0; max-width: 500px; margin: 0 auto;
            display: flex; justify-content: space-around; padding: 8px 0;
            border-top: 1px solid; backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            z-index: 1000; border-top-left-radius: 20px; border-top-right-radius: 20px;
        }
        .light-theme .bottom-nav { background: var(--bg-blur-light); border-top-color: var(--border-color-light); }
        .dark-theme .bottom-nav { background: var(--bg-blur-dark); border-top-color: var(--border-color-dark); }
        .nav-btn {
            background: none; border: none; cursor: pointer; display: flex;
            flex-direction: column; align-items: center; padding: 5px 10px;
            font-family: var(--font-family); font-size: 0.75rem; transition: 0.2s; flex-grow: 1;
        }
        .light-theme .nav-btn { color: var(--subtle-text-light); }
        .dark-theme .nav-btn { color: var(--subtle-text-dark); }
        .nav-btn i { font-size: 1.5rem; margin-bottom: 4px; }
        .nav-btn.active { font-weight: 700; transform: translateY(-3px); }
        .light-theme .nav-btn.active { color: var(--primary-color-light); }
        .dark-theme .nav-btn.active { color: var(--primary-color-dark); }
        /* Modal Styles */
        .modal {
            display: none; position: fixed; z-index: 2000; top: 20px; left: 50%; transform: translateX(-50%);
            width: auto; background-color: transparent;
            justify-content: center; align-items: center;
        }
        .modal-content {
            padding: 15px; border-radius: 15px; text-align: center;
            width: 250px;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--border-color-light);
            box-shadow: var(--shadow-light);
            transition: background-color 1s linear;
        }
        .dark-theme .modal-content {
            border: 1px solid var(--border-color-dark);
            box-shadow: var(--shadow-dark);
        }
        .loader {
            border: 5px solid #f3f3f3; border-radius: 50%; border-top: 5px solid;
            width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 15px;
        }
        .light-theme .loader { border-top-color: var(--primary-color-light); }
        .dark-theme .loader { border-top-color: var(--primary-color-dark); }
        #qr-code-container { padding: 20px; }
        #qr-code-canvas { width: 100% !important; height: auto !important; }
        .modal-close-btn {
            margin-top: 20px; padding: 10px 20px; border-radius: 8px;
            border: none; cursor: pointer;
        }
        .light-theme .modal-close-btn { background: #e5e5ea; color: #1c1c1e; }
        .dark-theme .modal-close-btn { background: #2c2c2e; color: #f2f2f7; }
    </style>
</head>
<body>
    <div class="background-orb" id="orb1"></div>
    <div class="background-orb" id="orb2"></div>
   
    <div id="app">
        <header class="profile-header">
            <div class="user-details" style="display: flex; align-items: center; gap: 15px;">
                <img id="user-photo" src="" alt="User Photo">
                <div>
                    <h1 id="user-name">Loading... <i class="fas fa-check-circle verified-icon"></i></h1>
                    <p>Balance: ৳<span id="user-points">0.00</span> TK</p>
                </div>
            </div>
        </header>
        <main id="main-content">
            <div id="home-page" class="page active">
                <h2>Dashboard</h2>
                <div class="glass-card time-date-card">
                    <h3 id="date-display">September 24, 2025</h3>
                    <h1 id="time-display">11:07 PM</h1>
                </div>
                <div class="glass-card joined-card" style="text-align: center; padding: 10px;">
                    <p>You have been joined for <span id="joined-days">1</span> days.</p>
                </div>
                <div class="glass-card home-task-list">
                    <h3>Today's Tasks</h3>
                    <div class="task-item">
                        <i class="fas fa-play-circle task-icon"></i>
                        <div class="task-info">
                            <h4>Watch Ad & Earn</h4>
                            <p>Watch short ads to earn rewards.</p>
                        </div>
                        <button class="action-btn" id="watch-ad-btn-home" style="width: auto; padding: 10px 20px;">Go</button>
                    </div>
                     <div class="task-item">
                        <i class="fas fa-camera-retro task-icon"></i>
                        <div class="task-info">
                            <h4>Watch Product Review Ad</h4>
                            <p>Get bonus for watching reviews.</p>
                        </div>
                        <button class="action-btn" id="watch-review-ad-btn-home" style="width: auto; padding: 10px 20px;">Go</button>
                    </div>
                     <div class="task-item">
                        <i class="fas fa-fast-forward task-icon"></i>
                        <div class="task-info">
                            <h4>Watch 3 Ads in a Row</h4>
                            <p>Earn a 0.75 TK bonus!</p>
                        </div>
                        <button class="action-btn" id="watch-row-ad-btn-home" style="width: auto; padding: 10px 20px;">Go</button>
                    </div>
                </div>
            </div>
            <div id="tasks-page" class="page">
                <h2>Complete Tasks</h2>
                 <div class="glass-card">
                     <h4>Daily Task Progress (<span id="daily-ads-watched">0</span>/300)</h4>
                     <div class="progress-bar-container">
                        <div id="task-progress-bar"></div>
                     </div>
                     <div class="streak-container">
                        <i class="fas fa-fire-alt"></i>
                        <span id="streak-days">Daily Login Streak: 1 Day</span>
                     </div>
                 </div>
                 <div class="glass-card countdown-timer">
                     <p>Next Bonus In:</p>
                     <h3 id="bonus-timer">01:00:00</h3>
                     <button id="claim-hourly-bonus-btn" class="action-btn" style="margin-top: 15px;" disabled>Claim ৳0.01</button>
                 </div>
                 <div class="glass-card home-task-list">
                    <h3>Additional Tasks</h3>
                    <div class="task-item">
                        <i class="fas fa-video task-icon"></i>
                        <div class="task-info">
                            <h4>Watch Entertainment Ad</h4>
                            <p>Watch entertaining ads to earn rewards.</p>
                        </div>
                        <button class="action-btn" id="watch-entertainment-btn" style="width: auto; padding: 10px 20px;">Go</button>
                    </div>
                    <div class="task-item">
                        <i class="fas fa-laptop task-icon"></i>
                        <div class="task-info">
                            <h4>Watch Tech Ad</h4>
                            <p>Watch tech-related ads for bonus.</p>
                        </div>
                        <button class="action-btn" id="watch-tech-btn" style="width: auto; padding: 10px 20px;">Go</button>
                    </div>
                    <div class="task-item">
                        <i class="fas fa-gamepad task-icon"></i>
                        <div class="task-info">
                            <h4>Watch Gaming Ad</h4>
                            <p>Watch gaming ads and earn.</p>
                        </div>
                        <button class="action-btn" id="watch-gaming-btn" style="width: auto; padding: 10px 20px;">Go</button>
                    </div>
                    <div class="task-item">
                        <i class="fas fa-newspaper task-icon"></i>
                        <div class="task-info">
                            <h4>Watch News Ad</h4>
                            <p>Watch news ads for rewards.</p>
                        </div>
                        <button class="action-btn" id="watch-news-btn" style="width: auto; padding: 10px 20px;">Go</button>
                    </div>
                </div>
                 </div>
           
            <div id="refer-page" class="page">
                <h2>Refer & Earn</h2>
                <div class="glass-card refer-header">
                    <img id="gift-animation" src="https://i.imgur.com/2gif5yB.gif" alt="Shaking Gift Box">
                    <h3>Share Your Link & Earn!</h3>
                    <p>Invite friends and you both get a bonus.</p>
                </div>
                <div class="glass-card">
                     <input type="text" id="referral-link-input" readonly>
                     <div class="share-options">
                         <button id="copy-ref-link-btn" class="share-btn"><i class="fas fa-copy"></i></button>
                         <button id="qr-ref-link-btn" class="share-btn"><i class="fas fa-qrcode"></i></button>
                     </div>
                </div>
                 <p id="fraud-message">🛡️ Fake or duplicate referrals may result in reward removal.</p>
            </div>
           
            <div id="withdraw-page" class="page">
                <h2>Withdraw</h2>
                 <div class="glass-card animated-balance">
                    <h3>Current Balance</h3>
                    <h2 id="animated-balance-value">৳0.00</h2>
                 </div>
                 <div class="glass-card" style="text-align: center; margin-bottom: 15px; background: rgba(255, 215, 0, 0.3);">
                     <p style="font-weight: bold; color: #ff9500;">Minimum Withdrawal: ৳50</p>
                 </div>
                 <div class="glass-card">
                     <form id="withdraw-form">
                         <div class="form-group">
                             <label>Select Method:</label>
                             <div class="withdraw-methods">
                                 <div class="method-btn" data-method="Bkash">
                                    <img src="https://i.imgur.com/4nF42T6.png" alt="Bkash">
                                    <span>Bkash</span>
                                 </div>
                                  <div class="method-btn" data-method="Nagad">
                                    <img src="https://i.imgur.com/xJJd33b.png" alt="Nagad">
                                    <span>Nagad</span>
                                 </div>
                                  <div class="method-btn" data-method="Recharge">
                                    <img src="https://i.imgur.com/2VdI25i.png" alt="Mobile Recharge">
                                    <span>Recharge</span>
                                 </div>
                             </div>
                             <input type="hidden" id="withdraw-method-input" required>
                         </div>
                         <div class="form-group">
                             <label for="account-number">Account Number:</label>
                             <input type="text" id="account-number" placeholder="e.g., 01700000000" required>
                         </div>
                         <div class="form-group">
                             <label for="amount">Amount (TK):</label>
                             <input type="number" id="amount" placeholder="Enter amount" required>
                         </div>
                         <div class="security-tips">
                             <p>🔒 Use your correct number. Money sent to a wrong number cannot be refunded.</p>
                             <p>🔒 You cannot request a new withdrawal while one is pending.</p>
                         </div>
                         <button type="submit" id="withdraw-submit-btn" class="action-btn" style="margin-top:20px;">
                             <span class="btn-text">Request Withdrawal</span>
                             <span class="btn-loader"></span>
                         </button>
                     </form>
                 </div>
            </div>
           
            <div id="profile-page" class="page">
                <h2>Profile</h2>
                <div class="glass-card">
                    <h3>Statistics</h3>
                    <div class="profile-stats">
                        <div class="stat-card glass-card">
                            <h3>Total Earnings</h3>
                            <p>৳<span id="total-earnings">0.00</span></p>
                        </div>
                        <div class="stat-card glass-card">
                            <h3>Today's Earnings</h3>
                            <p>৳<span id="today-earnings">0.00</span></p>
                        </div>
                        <div class="stat-card glass-card">
                            <h3>Total Withdrawn</h3>
                            <p>৳<span id="total-withdrawn">0.00</span></p>
                        </div>
                        <div class="stat-card glass-card">
                            <h3>Referrals</h3>
                            <p id="referral-count">0</p>
                        </div>
                    </div>
                </div>
                <div class="glass-card">
                    <a href="https://t.me/dailyearningsupport" target="_blank" class="action-btn" style="text-decoration: none;">
                       <i class="fab fa-telegram-plane" style="margin-right: 10px;"></i> Need Help? Contact Us
                    </a>
                </div>
            </div>
        </main>
        <nav class="bottom-nav">
            <button class="nav-btn active" data-page="home-page"><i class="fas fa-home"></i><span>Home</span></button>
            <button class="nav-btn" data-page="tasks-page"><i class="fas fa-tasks"></i><span>Tasks</span></button>
            <button class="nav-btn" data-page="refer-page"><i class="fas fa-users"></i><span>Refer</span></button>
            <button class="nav-btn" data-page="withdraw-page"><i class="fas fa-wallet"></i><span>Withdraw</span></button>
            <button class="nav-btn" data-page="profile-page"><i class="fas fa-user"></i><span>Profile</span></button>
        </nav>
    </div>
    <div id="loading-modal" class="modal">
        <div class="modal-content"><p id="modal-text">Watching Ad... Remaining: 15 seconds</p><button id="close-modal-btn" class="modal-close-btn">Close</button></div>
    </div>
    <div id="qr-code-modal" class="modal">
        <div class="modal-content glass-card">
            <h3>Your Referral QR Code</h3>
            <div id="qr-code-container"></div>
            <button class="modal-close-btn" id="close-qr-modal">Close</button>
        </div>
    </div>
   
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src='//libtl.com/sdk.js' data-zone='9712189' data-sdk=''></script>
   
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tg = window.Telegram.WebApp;
            // --- Configuration ---
            const BOT_USERNAME = "democash00_bot";
            const ADMIN_CHAT_ID = "6453637469";
            const DAILY_AD_LIMIT = 300;
            const POINTS_PER_AD = 0.25;
            const POINTS_PER_REVIEW_AD = 0.35;
            const ROW_AD_BONUS = 0.75;
            const MIN_WITHDRAW_POINTS = 50;
            // --- DOM Elements ---
            const allPages = document.querySelectorAll('.page');
            const navButtons = document.querySelectorAll('.nav-btn');
            const userPhotoElem = document.getElementById('user-photo');
            const userNameElem = document.getElementById('user-name');
            const userPointsElem = document.getElementById('user-points');
            const dailyAdsWatchedElem = document.getElementById('daily-ads-watched');
            const referralCountElem = document.getElementById('referral-count');
            const referralLinkInput = document.getElementById('referral-link-input');
            const copyRefLinkBtn = document.getElementById('copy-ref-link-btn');
            const qrRefLinkBtn = document.getElementById('qr-ref-link-btn');
            const loadingModal = document.getElementById('loading-modal');
            const qrCodeModal = document.getElementById('qr-code-modal');
            const closeQrModalBtn = document.getElementById('close-qr-modal');
            const qrCodeContainer = document.getElementById('qr-code-container');
           
            // Withdraw Page Elements
            const withdrawForm = document.getElementById('withdraw-form');
            const withdrawSubmitBtn = document.getElementById('withdraw-submit-btn');
            const animatedBalanceValue = document.getElementById('animated-balance-value');
            const withdrawMethodBtns = document.querySelectorAll('.method-btn');
            const withdrawMethodInput = document.getElementById('withdraw-method-input');
            // --- State Management ---
            let userState = {
                points: 0,
                dailyAdWatchCount: 0,
                lastAdWatchDate: null,
                referrals: [],
                userId: null,
                totalEarnings: 0,
                totalWithdrawn: 0,
                todaysEarnings: 0,
                lastLoginDate: null,
                loginStreak: 1,
                firstJoinDate: null,
                lastBonusClaimTime: null,
            };
           
            // Simulating an ad watch function with delay
            const handleWatchAd = (reward) => {
                if (userState.dailyAdWatchCount >= DAILY_AD_LIMIT) {
                    tg.showAlert("You have reached your daily ad watch limit."); return;
                }
                let remaining = 15;
                let canClaim = false;
                let adScript = null;
                let countdownInterval = null;
                loadingModal.style.display = 'flex';
                const modalText = document.getElementById('modal-text');
                const modalContent = document.querySelector('#loading-modal .modal-content');
                modalContent.style.backgroundColor = 'hsla(0, 100%, 50%, 0.5)'; // red
                modalText.textContent = `Watching Ad... Remaining: ${remaining} seconds`;
                const closeBtn = document.getElementById('close-modal-btn');
                closeBtn.onclick = () => {
                  if (canClaim) {
                    userState.points += reward;
                    userState.dailyAdWatchCount++;
                    userState.totalEarnings += reward;
                    userState.todaysEarnings += reward;
                    saveState();
                    updateUI();
                    tg.HapticFeedback.notificationOccurred('success');
                    tg.showAlert(`Congratulations! You've earned ৳${reward.toFixed(2)}.`);
                  } else {
                    tg.showAlert('Your task is incomplete.');
                  }
                  loadingModal.style.display = 'none';
                  clearInterval(countdownInterval);
                  if (adScript) adScript.remove();
                  canClaim = false;
                };
                // Dynamically add ad script
                adScript = document.createElement('script');
                adScript.src = '//libtl.com/sdk.js';
                adScript.dataset.zone = '9925533';
                adScript.dataset.sdk = 'show_9925533';
                document.body.appendChild(adScript);
                // Start countdown
                countdownInterval = setInterval(() => {
                  remaining--;
                  modalText.textContent = `Watching Ad... Remaining: ${remaining} seconds`;
                  const progress = (15 - remaining) / 15;
                  const hue = progress * 120; // 0 red to 120 green
                  modalContent.style.backgroundColor = `hsla(${hue}, 100%, 50%, 0.5)`;
                  if (remaining <= 0) {
                    clearInterval(countdownInterval);
                    canClaim = true;
                    modalText.textContent = 'Ad complete! Close to claim.';
                    modalContent.style.backgroundColor = 'hsla(120, 100%, 50%, 0.5)'; // green
                  }
                }, 1000);
            };
            const saveState = () => {
                if(userState.userId) {
                    localStorage.setItem(`userState_${userState.userId}`, JSON.stringify(userState));
                }
            };
            const loadState = (userId) => {
                const savedState = localStorage.getItem(`userState_${userId}`);
                if (savedState) {
                    userState = {...userState, ...JSON.parse(savedState)};
                }
            };
           
            // --- Core Functions ---
            const initApp = () => {
                tg.ready();
                tg.expand();
                document.body.className = `${tg.colorScheme}-theme`;
                const user = tg.initDataUnsafe.user;
                if (!user || !user.id) {
                    tg.showAlert("Could not verify user. Please open this app through Telegram.", () => tg.close());
                    return;
                }
               
                userState.userId = user.id;
                loadState(user.id);
               
                const today = new Date().toISOString().slice(0, 10);
                if (!userState.firstJoinDate) {
                    userState.firstJoinDate = today;
                }
                if (userState.lastAdWatchDate !== today) {
                    userState.dailyAdWatchCount = 0;
                    userState.todaysEarnings = 0;
                    userState.lastAdWatchDate = today;
                }
                // Streak logic
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                const yesterdayStr = yesterday.toISOString().slice(0, 10);
                if (userState.lastLoginDate === yesterdayStr) {
                    userState.loginStreak++;
                } else if (userState.lastLoginDate !== today) {
                    userState.loginStreak = 1;
                }
                userState.lastLoginDate = today;
               
                if (userState.lastBonusClaimTime === null) {
                    userState.lastBonusClaimTime = 0;
                }
               
                updateUI();
                setupNavigation();
                setupEventListeners();
                updateClock();
                setInterval(updateClock, 1000);
                updateBonusTimer();
                setInterval(updateBonusTimer, 1000);
                saveState();
            };
           
            const updateUI = () => {
                const user = tg.initDataUnsafe.user;
                if (user) {
                    userPhotoElem.src = user.photo_url || 'https://i.imgur.com/placeholder.png';
                    userNameElem.innerHTML = `${user.first_name || ''} ${user.last_name || ''} <i class="fas fa-check-circle verified-icon"></i>`;
                }
               
                // Animate balance update
                const balanceValue = parseFloat(userState.points).toFixed(2);
                userPointsElem.textContent = balanceValue;
                animatedBalanceValue.textContent = `৳${balanceValue}`;
                animatedBalanceValue.classList.add('bounce');
                setTimeout(() => animatedBalanceValue.classList.remove('bounce'), 300);
                // Update various stats
                dailyAdsWatchedElem.textContent = userState.dailyAdWatchCount;
                referralCountElem.textContent = userState.referrals.length;
                referralLinkInput.value = `https://t.me/${BOT_USERNAME}?start=ref_${userState.userId}`;
                document.getElementById('task-progress-bar').style.width = `${(userState.dailyAdWatchCount / DAILY_AD_LIMIT) * 100}%`;
                document.getElementById('streak-days').textContent = `Daily Login Streak: ${userState.loginStreak} Day(s)`;
               
                // Profile page stats
                document.getElementById('total-earnings').textContent = userState.totalEarnings.toFixed(2);
                document.getElementById('today-earnings').textContent = userState.todaysEarnings.toFixed(2);
                document.getElementById('total-withdrawn').textContent = userState.totalWithdrawn.toFixed(2);
                // Joined days
                const firstDate = new Date(userState.firstJoinDate);
                const now = new Date();
                const joinedDays = Math.floor((now - firstDate) / (1000 * 60 * 60 * 24)) + 1;
                document.getElementById('joined-days').textContent = joinedDays;
            };
            const updateClock = () => {
                const now = new Date();
                const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
                const timeOptions = { hour: '2-digit', minute: '2-digit', hour12: true };
                document.getElementById('date-display').textContent = now.toLocaleDateString('en-US', dateOptions);
                document.getElementById('time-display').textContent = now.toLocaleTimeString('en-US', timeOptions);
            };
           
            const updateBonusTimer = () => {
                const now = Date.now();
                const nextClaim = userState.lastBonusClaimTime + 3600000; // 1 hour
                const remaining = nextClaim - now;
                const bonusTimerElem = document.getElementById('bonus-timer');
                const claimBtn = document.getElementById('claim-hourly-bonus-btn');
                if (remaining <= 0) {
                    bonusTimerElem.textContent = '00:00:00';
                    claimBtn.disabled = false;
                } else {
                    const hours = Math.floor(remaining / 3600000);
                    const mins = Math.floor((remaining % 3600000) / 60000);
                    const secs = Math.floor((remaining % 60000) / 1000);
                    bonusTimerElem.textContent = `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                    claimBtn.disabled = true;
                }
            };
           
            const setupEventListeners = () => {
                document.getElementById('watch-ad-btn-home').addEventListener('click', () => handleWatchAd(POINTS_PER_AD));
                document.getElementById('watch-review-ad-btn-home').addEventListener('click', () => handleWatchAd(POINTS_PER_REVIEW_AD));
                document.getElementById('watch-row-ad-btn-home').addEventListener('click', () => handleWatchAd(ROW_AD_BONUS));
                document.getElementById('watch-entertainment-btn').addEventListener('click', () => handleWatchAd(POINTS_PER_AD));
                document.getElementById('watch-tech-btn').addEventListener('click', () => handleWatchAd(POINTS_PER_AD));
                document.getElementById('watch-gaming-btn').addEventListener('click', () => handleWatchAd(POINTS_PER_AD));
                document.getElementById('watch-news-btn').addEventListener('click', () => handleWatchAd(POINTS_PER_AD));
                withdrawForm.addEventListener('submit', handleWithdraw);
                copyRefLinkBtn.addEventListener('click', copyReferralLink);
                qrRefLinkBtn.addEventListener('click', generateAndShowQR);
                closeQrModalBtn.addEventListener('click', () => qrCodeModal.style.display = 'none');
               
                document.getElementById('claim-hourly-bonus-btn').addEventListener('click', () => {
                    const claimBtn = document.getElementById('claim-hourly-bonus-btn');
                    if (!claimBtn.disabled) {
                        userState.points += 0.01;
                        userState.totalEarnings += 0.01;
                        userState.todaysEarnings += 0.01;
                        userState.lastBonusClaimTime = Date.now();
                        saveState();
                        updateUI();
                        updateBonusTimer();
                        tg.showAlert('Claimed ৳0.01!');
                    }
                });
               
                withdrawMethodBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        withdrawMethodBtns.forEach(b => b.classList.remove('selected'));
                        btn.classList.add('selected');
                        withdrawMethodInput.value = btn.dataset.method;
                    });
                });
            };
            const handleWithdraw = async (e) => {
                e.preventDefault();
                const method = withdrawMethodInput.value;
                const accountNumber = document.getElementById('account-number').value;
                const amount = parseFloat(document.getElementById('amount').value);
                if (!method) { tg.showAlert("Please select a withdrawal method."); return; }
                if (isNaN(amount) || amount <= 0) { tg.showAlert("Please enter a valid amount."); return; }
                if (amount < MIN_WITHDRAW_POINTS) { tg.showAlert(`Minimum withdrawal is ৳${MIN_WITHDRAW_POINTS}.`); return; }
                if (amount > userState.points) { tg.showAlert("You don't have enough balance."); return; }
                withdrawSubmitBtn.classList.add('loading');
                withdrawSubmitBtn.disabled = true;
                const originalPoints = userState.points;
                userState.points -= amount;
                userState.totalWithdrawn += amount;
                saveState();
                updateUI();
               
                // Play success sound
                new Audio('https://www.myinstants.com/media/sounds/success-chime.mp3').play();
                tg.showAlert("🎉 Your request is being processed!");
                withdrawForm.reset();
                withdrawMethodBtns.forEach(b => b.classList.remove('selected'));
                // Here you would send the data to your backend/admin panel
                // For now, we'll just simulate the end of the loading
                setTimeout(() => {
                    withdrawSubmitBtn.classList.remove('loading');
                    withdrawSubmitBtn.disabled = false;
                }, 1500);
            };
           
            const copyReferralLink = () => {
                navigator.clipboard.writeText(referralLinkInput.value).then(() => {
                    tg.HapticFeedback.notificationOccurred('success');
                    tg.showAlert("Referral link copied!");
                });
            };
            const generateAndShowQR = () => {
                qrCodeContainer.innerHTML = '';
                const typeNumber = 4;
                const errorCorrectionLevel = 'L';
                const qr = qrcode(typeNumber, errorCorrectionLevel);
                qr.addData(referralLinkInput.value);
                qr.make();
                qrCodeContainer.innerHTML = qr.createImgTag();
                qrCodeModal.style.display = 'flex';
            };
            const setupNavigation = () => {
                navButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const pageId = button.dataset.page;
                        allPages.forEach(page => page.classList.remove('active'));
                        document.getElementById(pageId).classList.add('active');
                        navButtons.forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');
                    });
                });
                // Link home page buttons to tasks page
                ['watch-ad-btn-home', 'watch-review-ad-btn-home', 'watch-row-ad-btn-home'].forEach(id => {
                    document.getElementById(id).addEventListener('click', () => {
                        document.querySelector('.nav-btn[data-page="tasks-page"]').click();
                    });
                });
            };
            initApp();
        });
    </script>
</body>
</html>
